import 'package:flutter/material.dart';
import 'package:login_sample/screens/splash.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.deepPurple),
      ),
      home: ScreenSplash(),
    );
  }
}
---------------------main-----------------------------

import 'package:flutter/material.dart';
import 'package:login_sample/screens/home.dart';
import 'package:login_sample/screens/login.dart';
import 'package:shared_preferences/shared_preferences.dart';


const SAVE_KEY_NAME = 'UserLoggedIn';

class ScreenSplash extends StatefulWidget {
  const ScreenSplash({super.key});

  @override
  State<ScreenSplash> createState() => _ScreenSplashState();
}

class _ScreenSplashState extends State<ScreenSplash> {
  
  @override
  void initState() {
    checkUserLoggedIn();
    super.initState();
  }

  @override
  void didChangeDependencies() {
    // TODO: implement didChangeDependencies
    super.didChangeDependencies();
  }



  @override
  Widget build(BuildContext context) {
    return Scaffold(body: Center(child: Image.asset('assets/images/wallpaper.jpg', height: 300,
    ),
    ),
   );
  }




  @override
  void dispose() {
    // TODO: implement dispose
    super.dispose();
  }

  Future<void> gotoLogin() async {
   await Future.delayed(Duration(seconds: 3));
   Navigator.of(context).pushReplacement(MaterialPageRoute(builder: (ctx) => ScreenLogin(),),);

  }

  Future<void> checkUserLoggedIn() async{
    final _sharedPrefs =await SharedPreferences.getInstance();
    final _userLoggedIn = _sharedPrefs.getBool(SAVE_KEY_NAME);
    if(_userLoggedIn == null || _userLoggedIn == false)
    {
      gotoLogin();

    } else {
      Navigator.of(context).pushReplacement(MaterialPageRoute(builder: (ctx1)=> ScreenHome()));
    }
    
  }

}




--------------------splash------------------------

import 'package:flutter/material.dart';
import 'package:login_sample/screens/home.dart';
import 'package:login_sample/screens/splash.dart';
import 'package:shared_preferences/shared_preferences.dart';

class ScreenLogin extends StatefulWidget {
  ScreenLogin({super.key});

  @override
  State<ScreenLogin> createState() => _ScreenLoginState();
}

class _ScreenLoginState extends State<ScreenLogin> {
  final _usernameController = TextEditingController();

  final _passwordController = TextEditingController();

  bool _isDataMatched = true;

  final _formKey = GlobalKey<FormState>();

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(8.0),

          child: Form(
            key: _formKey,
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.end,
              children: [
              TextFormField(
                controller: _usernameController,
                decoration:const InputDecoration(border: OutlineInputBorder(),
                hintText: 'username',
                ),
                validator: (value){
                //  if(_isDataMatched)
                //  {
                //   return null;
                //  } else {
                //   return 'Error';
                //  }
                if (value == null || value.isEmpty){
                  return 'value is empty';
                } else {
                  return null;
                }
                },
                ),
            
               const SizedBox(height: 20),
            
              TextFormField(
                controller: _passwordController,
                obscureText: true,
                decoration: const InputDecoration(border: OutlineInputBorder(),
                  hintText: 'password',
                ),
                 validator: (value){
                //  if(_isDataMatched)
                //  {
                //   return null;
                //  } else {
                //   return 'Error';
                //  }
                if (value == null || value.isEmpty){
                  return 'value is empty';
                } else {
                  return null;
                }
                 },
              ),
            
               const SizedBox(height: 20),
            
              Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Visibility(visible: !_isDataMatched,
                    child: Text('username password doesnot match', style: TextStyle(color: Colors.red),)),
                  ElevatedButton.icon(onPressed: (){
                   if( _formKey.currentState!.validate()){
                    checkLogin(context);
                   }else {
                    print('data empty');
                   }
                    //checkLogin(context);
                  
                  }, icon:const Icon(Icons.check),label:const Text('login'),),
                ],
              ),
            ],),
          ),
        ),
      ),
    );
  }

  Future<void> checkLogin(BuildContext ctx)
  async {
    final _username = _usernameController.text;
    final _password = _passwordController.text;
    
    if(_username == _password){
     print('username pass match');

     final _sharedPrefs  = await SharedPreferences.getInstance() ;
      await _sharedPrefs.setBool(SAVE_KEY_NAME, true);

     Navigator.of(ctx).pushReplacement(MaterialPageRoute(builder: (ctx1)=> ScreenHome()));

    }else {

      print('username pass doesnot match');

    }
  }
}
----------------------------------login-------------------------------------------------------




import 'package:flutter/material.dart';
import 'package:login_sample/screens/login.dart';
import 'package:shared_preferences/shared_preferences.dart';

class ScreenHome extends StatelessWidget {
  const ScreenHome({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: Text('Home'),
      actions: [
        IconButton(onPressed: (){
          signout(context);
        }, icon: Icon(Icons.exit_to_app)),
      ],
      ),
      body: SafeArea(child: Center(child: Text('Home'))),
    );
  }

  signout(BuildContext ctx) async
  {
     final _sharedPrefs  = await SharedPreferences.getInstance() ;
      _sharedPrefs.clear();


    Navigator.of(ctx).pushAndRemoveUntil(MaterialPageRoute(builder: (ctx1) => ScreenLogin()), (route) => false);
  }
}
-------------------------home---------------------------------------------------
